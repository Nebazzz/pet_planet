/* empty css              */(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();const i="https://bumpy-certain-share.glitch.me",u=document.querySelectorAll(".store__category-button"),l=document.querySelector(".store__list"),p=document.querySelector(".store__cart-button"),y=p.querySelector(".store__cart-cnt"),n=document.querySelector(".modal-overlay"),d=document.querySelector(".modal__cart-items");document.querySelector(".modal-overlay_close-button");const _=({photoUrl:t,name:e,price:r})=>{const s=document.createElement("li");return s.classList.add("store__item"),s.innerHTML=`
    <article class="store__product product">
      <img class="product__image" src="${i}${t}" 
        alt="${e}" width="388" height="261">

      <h3 class="product__title">${e}</h3>

      <p class="product__price">${r}&nbsp;₽</p>

      <button class="product_btn-add-cart">Заказать</button>

    </article>
  `,s},f=t=>{l.textContent="",t.forEach(e=>{const r=_(e);l.append(r)})},m=async t=>{try{const e=await fetch(`${i}/api/products/category/${t}`);if(!e.ok)throw new Error(e.status);const r=await e.json();f(r)}catch(e){console.error(`Ошибка запроса товаров: ${e}`)}},g=({target:t})=>{const e=t.textContent;u.forEach(r=>{r.classList.remove("store__category-button_active")}),t.classList.add("store__category-button_active"),m(e)};u.forEach(t=>{t.addEventListener("click",g),t.classList.contains("store__category-button_active")&&m(t.textContent)});p.addEventListener("click",()=>{n.style.display="flex",h()});const h=()=>{d.textContent="",JSON.parse(localStorage.getItem("cartItems")||"[]").forEach(e=>{const r=document.createElement("li");r.textContent=e,d.append(r)})};n.addEventListener("click",({target:t})=>{(t===n||t.closest(".modal-overlay_close-button"))&&(n.style.display="none")});const C=()=>{const t=JSON.parse(localStorage.getItem("cartItems")||"[]");y.textContent=t.length};C();const I=t=>{const e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.push(t),localStorage.setItem("cartItems",JSON.stringify(e))};l.addEventListener("click",({target:t})=>{if(t.closest(".product_btn-add-cart")){const r=t.closest(".store__product").querySelector(".product__title").textContent;I(r)}});
